# =============================================================================
# Server Configuration Environment Variables
# =============================================================================
# Copy this file to .env and update with your actual values
# IMPORTANT: Never commit .env to version control!

# =============================================================================
# User Configuration
# =============================================================================
# Username for the main user account (1-32 chars, lowercase alphanumeric + ._-)
USERNAME=ubuntu

# SSH port (1-65535, default 22 - consider using non-standard port for security)
SSH_PORT=22

# =============================================================================
# SSH Keys (REQUIRED)
# =============================================================================
# Your SSH public key(s) - MUST be valid SSH public key format
# Starts with: ssh-rsa, ssh-ed25519, ecdsa-sha2-nistp256, etc.
#
# Example: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... user@host
PERSONAL_SSH_KEY=""

# Optional: Separate key for control plane access (leave empty to use PERSONAL_SSH_KEY)
CONTROL_PLANE_SSH_KEY=""

# =============================================================================
# Network Configuration
# =============================================================================
# Control plane IP address (required for workers, auto-detected for control plane)
# Must be valid IPv4 address
CONTROL_PLANE_IP=""

# =============================================================================
# Service Ports
# =============================================================================
CONTROL_PLANE_UI_PORT=3000
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# =============================================================================
# Fail2ban Configuration (Brute-force Protection)
# =============================================================================
# FAIL2BAN_FINDTIME: Time window to count failed attempts (seconds)
#   - 600 (10 min) is reasonable for most cases
FAIL2BAN_FINDTIME=600

# FAIL2BAN_MAXRETRY: Number of failures before ban
#   - 3 is secure (recommended)
#   - 5 allows more recovery attempts
FAIL2BAN_MAXRETRY=3

# FAIL2BAN_BANTIME: How long to ban offending IPs (seconds)
#   - 3600 (1 hour) is minimum recommended
#   - 86400 (24 hours) for higher security
#   - -1 for permanent ban (use with caution)
FAIL2BAN_BANTIME=3600

# =============================================================================
# SSH Security Settings
# =============================================================================
# Max authentication attempts per connection (3 is secure)
SSH_MAX_AUTH_TRIES=3

# Client keepalive settings (detects dead connections)
# Interval in seconds (0 disables, 300 = 5 min recommended)
SSH_CLIENT_ALIVE_INTERVAL=300
# Max missed keepalives before disconnect
SSH_CLIENT_ALIVE_COUNT_MAX=2

# Rate limiting for new SSH connections
# Format: start:rate:full (e.g., 10:30:60)
# - Accept 10 connections, then 30% chance to drop, block after 60
SSH_MAX_STARTUPS=10:30:60

# Time allowed for authentication (seconds, 60 is secure)
SSH_LOGIN_GRACE_TIME=60
